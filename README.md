# Реляційні та нереляційні бази даних у великомасштабних системах: PostgreSQL проти MongoDB 
Доповідь підготував студент групи ІМ-34 Сюсюков Володимир

## Вступ
Сучасні інформаційні системи потребують ефективних рішень для зберігання, обробки та аналізу даних. Приклади таких систем включають платформи електронної комерції, системи управління великими потоками даних у реальному часі, а також аналітичні інструменти для прогнозування бізнесових трендів. Залежно від вимог проєкту, вибір між реляційними та нереляційними базами даних може значно вплинути на продуктивність, гнучкість та масштабованість системи. PostgreSQL та MongoDB є провідними представниками реляційних і нереляційних баз даних відповідно. У цій статті буде розглянуто ключові особливості, переваги, недоліки та приклади використання кожної з них у великомасштабних системах.

## Реляційні бази даних: PostgreSQL
PostgreSQL — це потужна реляційна база даних із відкритим кодом, яка підтримує стандарт SQL. У порівнянні з іншими реляційними базами даних, такими як MySQL та Oracle, PostgreSQL виділяється своєю розширюваністю та гнучкістю. Наприклад, на відміну від MySQL, PostgreSQL підтримує складніші типи даних, такі як JSONB для роботи з напівструктурованими даними, а також повнотекстовий пошук, який не завжди доступний у MySQL. Крім того, PostgreSQL є більш доступною за вартістю альтернативою Oracle, зберігаючи при цьому високу продуктивність та надійність. Її головними особливостями є підтримка транзакцій ACID, розширені функції для роботи з даними та висока продуктивність у складних аналітичних запитах.

### Основні можливості PostgreSQL:
1. Сувора схема: передбачає чітко визначені таблиці з типами даних для кожного стовпця.
2. Підтримка складних запитів: PostgreSQL дозволяє виконувати багатотабличні запити та складні обчислення.
3. Розширюваність: можливість додавати нові типи даних, функції та модулі.
4. ACID-транзакції: забезпечує надійність і цілісність даних у критично важливих системах.

### Приклад створення таблиці:
```sql
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    customer_name VARCHAR(100) NOT NULL,
    order_date DATE NOT NULL,
    total_amount NUMERIC(10, 2) NOT NULL
);
```

### Приклад запиту з використанням функції агрегування:
```sql
SELECT customer_name, SUM(total_amount) AS total_spent
FROM orders
GROUP BY customer_name
HAVING SUM(total_amount) > 500;
```
PostgreSQL також підтримує функції розподіленої обробки даних через механізми реплікації та шардінгу, що дозволяє масштабувати систему залежно від навантаження.

## Нереляційні бази даних: MongoDB
MongoDB — документо-орієнтована база даних, яка використовує JSON-подібні документи для зберігання даних. Наприклад, компанія Uber успішно застосовує MongoDB для обробки даних у своїх системах, де ключовими вимогами є гнучкість схеми та швидкість обробки великих обсягів інформації. Цей підхід дозволяє зберігати напівструктуровані та неструктуровані дані, що особливо корисно в системах зі змінною схемою.

### Основні можливості MongoDB:
1. Гнучка структура: дані зберігаються в документах, які не вимагають суворого визначення схеми.
2. Горизонтальне масштабування: підтримка шардінгу дозволяє розподіляти дані між кількома вузлами.
3. Висока швидкість запису: ідеально підходить для додатків із високою швидкістю генерації даних.
4. Масштабована аналітика: інструменти для складної агрегації даних.

### Приклад вставки документа:
```javascript
db.orders.insertOne({
    customerName: "Jane Doe",
    orderDate: new Date("2025-01-01"),
    items: [
        { product: "Laptop", quantity: 1, price: 1200 },
        { product: "Mouse", quantity: 2, price: 25 }
    ],
    totalAmount: 1250
});
```

### Приклад агрегації:
```javascript
db.orders.aggregate([
    { $match: { totalAmount: { $gt: 500 } } },
    { $group: { _id: "$customerName", totalSpent: { $sum: "$totalAmount" } } }
]);
```
MongoDB широко використовується в динамічних додатках, таких як платформи управління контентом (наприклад, WordPress або Wix), онлайн-ігри (наприклад, проекти Blizzard Entertainment) та хмарні сервіси, такі як Atlas від самої MongoDB. Ці приклади ілюструють її можливості адаптуватися до високонавантажених і змінних середовищ.

## Порівняння PostgreSQL та MongoDB

| Критерій              | PostgreSQL                               | MongoDB                                 |
|-----------------------|------------------------------------------|-----------------------------------------|
| **Структура даних**    | Строго типізовані таблиці               | JSON-подібні документи, що дозволяють варіативність структур |
| **Масштабованість**    | Підходить для вертикального масштабування | Горизонтальне масштабування через шардінг |
| **Продуктивність**     | Висока продуктивність у складних транзакціях | Оптимізована для швидких операцій запису та читання |
| **Гнучкість**          | Менш гнучка через сувору схему          | Висока гнучкість завдяки відсутності суворої схеми |
| **Використання**       | Банківські системи, фінансовий облік    | Соціальні мережі, управління контентом, IoT-додатки |
| **Інструменти аналітики** | Підтримка складних запитів і аналітики  | Потужні інструменти для агрегації даних |

#### 1. **Структура даних**:
- PostgreSQL використовує строго типізовані таблиці.
- MongoDB зберігає дані у JSON-подібних документах, що дозволяє зберігати різні структури в одному наборі даних.

#### 2. **Масштабованість**:
- PostgreSQL підходить для вертикального масштабування.
- MongoDB краще працює з горизонтальним масштабуванням через вбудовану підтримку шардінгу.

#### 3. **Продуктивність**:
- PostgreSQL демонструє високу продуктивність у складних транзакціях.
- MongoDB оптимізована для швидких операцій запису та читання.

### Приклади використання

#### PostgreSQL у банківських системах:
Банки використовують PostgreSQL для управління транзакціями, які потребують високої надійності та цілісності даних.

```sql
BEGIN;
UPDATE accounts SET balance = balance - 100 WHERE id = 1;
UPDATE accounts SET balance = balance + 100 WHERE id = 2;
COMMIT;
```

#### MongoDB у соціальних мережах:
Соціальні мережі обирають MongoDB для зберігання профілів користувачів і постів, які мають різноманітну структуру.

```javascript
db.posts.insertMany([
    { userId: "1", content: "Hello world!", likes: 10 },
    { userId: "2", content: "MongoDB is great!", comments: ["Absolutely!", "Indeed!"] }
]);
```

## Висновки
PostgreSQL та MongoDB мають свої сильні сторони та сфери застосування. Для складних транзакційних систем, таких як банківські додатки чи фінансовий облік, PostgreSQL є ідеальним вибором завдяки підтримці ACID та складних запитів. У свою чергу, MongoDB підходить для додатків із динамічними вимогами до даних, таких як соціальні мережі, системи управління контентом або IoT-додатки, де гнучкість і масштабованість є ключовими вимогами. PostgreSQL є вибором для систем, де необхідна висока надійність і складні транзакції. MongoDB підходить для додатків із гнучкими вимогами до даних і високою швидкістю масштабування. Вибір бази даних повинен ґрунтуватися на потребах проєкту та очікуваних навантаженнях. цей текст доповни прикладами та різними підтемами, щоб більш детально розібрптися в різниці sql та nosql.
